<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Secciones</title>
</head>
<body>
<main layout:fragment="content" class="max-w-4xl mx-auto px-4 py-8 space-y-10">

    <h1 class="text-3xl font-bold text-gray-800 text-center mb-8">Secciones</h1>

    <!-- Lista de secciones -->
    <div th:each="section : ${sections}"
         class="bg-white rounded-2xl shadow-md hover:shadow-lg transition p-8 space-y-6">

        <!-- Título -->
        <h2 th:text="${section.title}"
            class="text-2xl font-bold text-gray-900"></h2>

        <!-- Descripción -->
        <p th:text="${section.description}"
           class="text-gray-700 leading-relaxed"></p>

        <!-- Ejemplo de código -->
        <div th:if="${section.code != null}">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Ejemplo de código</h3>
            <pre class="rounded-lg overflow-x-auto bg-gray-900 text-gray-100 p-4 text-sm">
<code th:text="${section.code}" th:class="'language-' + ${section.language}"></code>
            </pre>
        </div>

        <!-- Video con miniatura -->
        <div th:if="${!#strings.isEmpty(section.urlVideo)}">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Video explicativo</h3>
            <a th:href="${section.urlVideo}" target="_blank"
               class="block group relative rounded-lg overflow-hidden shadow hover:shadow-md transition">
                <img th:src="@{'https://img.youtube.com/vi/' + ${#strings.substring(section.urlVideo, section.urlVideo.indexOf('v=') + 2)} + '/hqdefault.jpg'}"
                     alt="Miniatura del video"
                     class="w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300">
                <div class="absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/50 transition">
                    <span class="text-white text-5xl">▶</span>
                </div>
            </a>
        </div>

        <!-- Botón para abrir sección completa -->
        <div>
            <a th:href="@{/section/{id}(id=${section.id})}" target="_blank"
               class="inline-block px-5 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-500 transition">
                Abrir sección completa
            </a>
        </div>
    </div>

</main>
</body>
</html>
